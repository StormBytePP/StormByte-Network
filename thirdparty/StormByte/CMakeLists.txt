if(WIN32)
	set(WITH_STORMBYTE "BUNDLED" CACHE STRING "Use StormByte components (SYSTEM/BUNDLED)" FORCE)
else()
	set(WITH_STORMBYTE "BUNDLED" CACHE STRING "Use StormByte components (SYSTEM/BUNDLED)")
endif()
if(WITH_STORMBYTE STREQUAL "SYSTEM")
	find_package(StormByte REQUIRED Buffer Logger)
else()
	if (NOT TARGET StormByte)
		set(STORMBYTE_AS_DEPENDENCY TRUE)
		add_subdirectory(base)
		add_subdirectory(buffer)
		add_subdirectory(logger)
	endif()
endif()

cmake_policy(SET CMP0079 NEW)
target_link_libraries(StormByte-Network PUBLIC StormByte::Buffer StormByte::Logger StormByte)